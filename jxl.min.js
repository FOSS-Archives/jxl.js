!function(){"use strict";let e={useCache:!0},t;function a(a,s,c){if(s instanceof Blob){let n=URL.createObjectURL(s);c?a.style.backgroundImage='url("'+n+'")':a.src=n}else if("OffscreenCanvas"in window){let r=new OffscreenCanvas(s.width,s.height),l=new Worker("jxl_dec.js");l.postMessage({canvas:r,imgData:s},[r]),l.addEventListener("message",s=>{c?a.style.backgroundImage='url("'+s.data.url+'")':a.src=s.data.url,e.useCache&&t&&t.put(a.dataset.jxlSrc,new Response(s.data.blob))})}else{let i=document.createElement("canvas");i.width=s.width,i.height=s.height,i.getContext("2d").putImageData(s,0,0),i.toBlob(async s=>{let n=URL.createObjectURL(s);c?a.style.backgroundImage='url("'+n+'")':a.src=n,e.useCache&&t&&t.put(a.dataset.jxlSrc,new Response(s))},"image/jpeg")}}async function s(s,c){let n=s.dataset.jxlSrc=c?getComputedStyle(s).backgroundImage.slice(5,-2):s.currentSrc;if(s.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",e.useCache){try{t=t||await caches.open("jxl")}catch(r){}let l=t&&await t.match(n);if(l){let i=await l.blob();requestAnimationFrame(()=>a(s,i,c));return}}let d=await fetch(n),o=await d.arrayBuffer(),u=new Worker("jxl_dec.js");u.postMessage({jxlSrc:n,image:o},[o]),u.addEventListener("message",e=>requestAnimationFrame(()=>a(s,e.data.imgData,c)))}new MutationObserver(e=>e.forEach(e=>Array.prototype.filter.call(e.addedNodes,e=>e instanceof HTMLImageElement&&e.src.endsWith(".jxl")||e instanceof Element&&getComputedStyle(e).backgroundImage.endsWith('.jxl")')).forEach(e=>{e instanceof HTMLImageElement?e.onerror=()=>s(e,!1):s(e,!0)}))).observe(document.documentElement,{subtree:!0,childList:!0})}();